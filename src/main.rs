use clap::Parser;
use dioxus_cli::*;

#[tokio::main]
async fn main() -> Result<()> {
    let args = Cli::parse();
    set_up_logging();

    match args.action {
        Commands::Translate(opts) => {
            if let Err(e) = opts.translate() {
                log::error!("translate error: {}", e);
            }
        }

        Commands::Render(opts) => {
            if let Err(e) = opts.render() {
                log::error!("render error: {}", e);
            }
        }

        Commands::Build(opts) => {
            if let Err(e) = opts.build() {
                log::error!("build error: {}", e);
            }
        }

        Commands::Clean(opts) => {
            if let Err(e) = opts.clean() {
                log::error!("clean error: {}", e);
            }
        }

        Commands::Serve(opts) => {
            if let Err(e) = opts.serve().await {
                log::error!("serve error: {}", e);
            }
        }

        Commands::Create(opts) => {
            if let Err(e) = opts.create() {
                log::error!("create error: {}", e);
            }
        }

        Commands::Config(opts) => {
            if let Err(e) = opts.config() {
                log::error!("config error: {}", e);
            }
        }

        Commands::Tool(opts) => {
            if let Err(e) = opts.tool().await {
                log::error!("tool error: {}", e);
            }
        }
    }

    Ok(())
}
